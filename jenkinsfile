pipeline {
    agent any
    stages {
        stage('git clone') {
            steps {
                git branch: 'main', credentialsId: 'sample_py', url: 'https://github.com/sathiyarajm/my_project.git'
           }
        }
        stage('docker build image') {
            steps {
                sh 'docker build -t myimage .'
           }
        }
        stage('docker old container delete') {
            steps {
                sh 'docker rm -f mycontainer || true'
           }
        }
        stage('docker run container') {
            steps {
                sh 'docker run --name=mycontainer myimage'
           }
        }        
    }
}
